webpackJsonp([26],{132:function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function h(e,t,n,r){typeof n!="function"&&(r=n,n=null);if(!c){var o=document.createElement("div");l=new i.a({el:o,data:function(){return{title:"",msg:t,mode:e,callback:n,pos:"center",posRelativeTo:null,maskStyles:{},bodyStyle:{}}},template:f,components:{VueDialog:s["default"]}}),c=l.$children[0]}return l.title="",l.msg=t,l.mode=e,l.callback=n,r?(l.posRelativeTo=r.posRelativeTo,l.pos=r.pos,window.dialog=c):(l.posRelativeTo=null,l.pos="center",l.maskStyles={},l.bodyStyle={}),c.$nextTick(function(){c.open()}),c}Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=n.n(r),s=n(353),o=n(374),u=n.n(o);s["default"].toast=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=document.querySelector(".Toast");n||(n=document.createElement("div"),document.body.appendChild(n)),n.innerHTML=u()(e);var r=t.classNames||[];n.className=["Toast"].concat(a(r)).join(" "),n.offsetWidth,n.classList.add("Toast--show")},s["default"].alert=function(e,t,n){s["default"].dialogVm=h("alert",e,t,n)},s["default"].confirm=function(e,t,n){s["default"].dialogVm=h("confirm",e,t,n)};var f='<vue-dialog :title="title" :msg="msg" :mode="mode"  :callback="callback" :pos="pos" :pos-relative-to="posRelativeTo" :mask-styles="maskStyles" :body-style="bodyStyle"></vue-dialog>',l=void 0,c=void 0;t["default"]=s["default"]},136:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(14),i=n(349),s=n(140),o=n(29);n.d(t,"audio",function(){return f}),n.d(t,"slide",function(){return c}),n.d(t,"image",function(){return h}),n.d(t,"shape",function(){return p}),n.d(t,"template",function(){return d}),n.d(t,"exporter",function(){return v});var u={};if(r.inBrowser){var a=n(348).default;u=new a({tipFn:function(t){return o["default"].$emit("tips-error",{tips:t,lastTime:5})}})}var f={upload:function(t){return u.FORMDATA("/api/audio/upload",t)}},l=!1,c={add:function(t){var i=t.slide_config,s=i===undefined?{}:i,o=t.slide_title,a=t.slide_desc,f=a===undefined?"":a,l=t.slide_autoplay_interval,c=t.slide_create_status,h=c===undefined?0:c,p=t.slide_id,d=p===undefined?"":p;return n.i(r.isString)(s)||(s=JSON.stringify(s)),u.POST("/api/slide/add",{slide_config:s,slide_title:o,slide_desc:f,slide_autoplay_interval:l,slide_create_status:h,slide_id:d})},copy:function(t){return u.POST("/api/slide/copy",{slide_id:t})},detail:function(t){return r.inBrowser&&!n.i(r.isEmpty)(window.SD.slide)?Promise.resolve(n.i(r.deepClone)(window.SD.slide)):u.GET("/api/slide/detail",{slide_id:t})},save:function(t,i,s,a){if(l)return Promise.resolve();l=!0;if(s===undefined)throw new Error("save 接口必须包含版本信息");if(!n.i(r.isString)(t))return Promise.reject(new Error("slideId need a string"));n.i(r.isString)(i)||(i=JSON.stringify(i));var f={slide_id:t,slide_config:i,slide_info_version:s},c="/api/slide/update",h=null;return navigator.onLine?h=u.POST(c,f).then(function(e){return e&&e.slide_info_version&&o["default"].$emit("slide-info-version-update",e.slide_info_version),e}):h=Promise.reject(new Error("offline")),h.then(function(e){return l=!1,e}).catch(function(e){return l=!1,Promise.reject(e)})},updateInfo:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"noLogin",a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},f=arguments[2];if(typeof a["slide_info_version"]=="undefined")throw new Error("updateInfo 接口必须包含版本信息");var l=i["default"].getSlide(t,s.user_name);Object.assign(l,a),i["default"].setSlide(l,t,s.user_name);if(!s.isLogin||t==="noLogin")return Promise.resolve({errno:0});if(!n.i(r.isString)(t))return Promise.reject(new Error("slide_id must be a string"));a.slide_id=t;var c="/api/slide/update";return navigator.onLine?u.POST(c,a).then(function(e){return e&&e.slide_info_version&&o["default"].$emit("slide-info-version-update",e.slide_info_version),e}):Promise.reject(new Error("offline"))},updateSlideCollaborator:function(t,n){var r="/api/slide/"+t+"/collaborator/update",i=new FormData;return i.append("collaborators",n.join()),u.FORMDATA(r,i)},list:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:-1;return u.GET("/api/slide/list",{page:t,epage:n,tag_id:r})},"delete":function(t){return navigator.onLine?u.POST("/api/slide/delete",{slide_id:t}):Promise.reject(new Error("offline"))},publicList:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},i=t.user_name,s=t.page,o=s===undefined?1:s,a=t.epage,f=a===undefined?20:a,l=t.cache,c=l===undefined?!1:l;if(c&&r.inBrowser&&!n.i(r.isEmpty)(window.SD.slides)&&!n.i(r.isEmpty)(window.SD.author)){var h=window.SD.slides,p=window.SD.author;if(parseInt(h.currentPage,10)===o&&parseInt(h.pageSize,10)===f&&(i===p.user_name||!i))return Promise.resolve(h)}return!i&&r.inBrowser&&(window.SD.author&&window.SD.author.user_name?i=window.SD.author.user_name:window.SD.myself&&window.SD.myself.user_name&&(i=window.SD.myself.user_name)),u.GET("/api/slide/publiclist",{user_name:i,page:o,epage:f})},hotlist:function(t){return u.GET("/api/slide/hotlist",t)},collect:function(t){return u.POST("/api/slide/collect",{slide_id:t})},uncollect:function(t){return u.POST("/api/slide/uncollect",{slide_id:t})},settag:function(t,n){return u.POST("/api/slide/settag",{tag_id:t,slide_ids:n})}},h={add:function(t){return u.FORMDATA("/api/image/add",t)},addByUrl:function(t){return u.POST("/api/image/addbyurl",{url:t})},addByCrop:function(t){return u.POST("/api/image/addbycrop",{url:t})},del:function(t){return navigator.onLine?u.POST("/api/image/delete",{id:t}):Promise.reject(new Error("offline"))},list:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20;return u.GET("/api/image/list",{page:t,epage:n})},upload:function(t){return u.FORMDATA("/api/image/upload",t)}},p={publiclist:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:48;return u.GET("/api/shape/publiclist",{page:t,epage:n})}},d={add:function(t){return u.FORMDATA("/api/template/add",t)},del:function(t){return navigator.onLine?u.POST("/api/template/delete",{id:t}):Promise.reject(new Error("offline"))},list:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return u.GET("/api/template/list",{page:t,epage:n})},publiclist:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20;return u.GET("/api/template/publiclist",{page:t,epage:n})},apply:function(t){return n.i(r.isString)(t.slide_config)||(t.slide_config=JSON.stringify(t.slide_config)),u.POST("/api/template/apply",t)},update:function(t){return n.i(r.isString)(t.slide_config)||(t.slide_config=JSON.stringify(t.slide_config)),u.POST("/api/template/update",t)},getstatus:function(t){var n=t.slide_id;return u.GET("/api/template/getstatus",{slide_id:n})},templatelist:function(t){return u.GET("/api/template/templatelist",{page:t.page,pagesize:t.pagesize})}},v={canExportZip:function(){return navigator.onLine?u.GET("/api/slide/canexportzip"):Promise.reject(new Error("offline"))}};t["default"]={api:{audio:f,image:h,shape:p,slide:c,template:d}}},14:function(e,t,n){"use strict";function r(e){return e.indexOf("iPhone")!==-1||e.indexOf("Android")!==-1}function o(e,t){var n=navigator.mimeTypes;for(var r in n)if(n[r][e]===t)return!0;return!1}function v(e){return Object(e)===e&&typeof e!="function"&&!Array.isArray(e)}function m(e){return!Array.isArray(e)&&e-Number.parseFloat(e)+1>=0}function g(e){return Array.isArray(e)?e.length===0:v(e)?Object.keys(e).length===0:!e}function y(e){return e instanceof Event||e.originalEvent instanceof Event}function b(e){return e>=0}function w(e){return typeof e=="string"||e instanceof String}function E(e){return w(e)&&!!e.match(/^((https?|ftp|rtsp|mms):\/\/)(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}\.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+\.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z]\.[a-z]{2,6}|localhost)(:[0-9]{1,4})?((\/?)|(\/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+\/?)$/i)}function S(e){return w(e)&&!!e.match(/^((https):\/\/)(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}\.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+\.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z]\.[a-z]{2,6}|localhost)(:[0-9]{1,4})?((\/?)|(\/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+\/?)$/i)}function x(e,t){var n=Math.max(e.xmin,t.xmin),r=Math.max(e.ymin,t.ymin),i=Math.min(e.xmax,t.xmax),s=Math.min(e.ymax,t.ymax);return n>i||r>s}function T(e,t){var n=Math.max(e.xmin,t.xmin),r=Math.max(e.ymin,t.ymin),i=Math.min(e.xmax,t.xmax),s=Math.min(e.ymax,t.ymax);return n===i||r===s}function N(e,t){var n=Math.max(e.xmin,t.xmin),r=Math.max(e.ymin,t.ymin),i=Math.min(e.xmax,t.xmax),s=Math.min(e.ymax,t.ymax);return n<i&&r<s}function C(e,t){return e.xmin>t.xmin&&e.xmax<t.xmax&&e.ymin>t.ymin&&e.ymax<t.ymax}function k(e,t){if(!e||!t||!e.hasChildNodes())return!1;var n=e.childNodes;for(var r=n.length-1;r>-1;r--)if(n[r].isSameNode(t))return!0;return!1}function L(e,t){while(t.parentNode){t=t.parentNode;if(t===e)return!0}return!1}function A(e){if(!e)return!1;var t=e.replace(/&#8203;|\u200B/g,"").match(/<[^<>]+>[^<>]+<[^<>]+>/g);return Boolean(t)}function O(e,t){var n=!1;e:for(var r=e.length-1;r>-1;r--){var i=e[r].elements;for(var s=i.length-1;s>-1;s--)if(i[s].type==="plugin-iframe"&&(!t||i[s].src&&i[s].src.match(t))){n=!0;break e}}return n}function M(e){return m(e)?e+"px":"0px"}function _(e,t){var n=t?Number.parseInt(e,10):Number.parseFloat(e);return Number.isNaN(n)?0:n}function D(e){return encodeURI(e.toString())}function P(e){var t=_(e.top),n=_(e.left),r=n+_(rt(e,"width")),i=t+_(rt(e,"height"));return{top:t,left:n,right:r,bottom:i}}function H(e){return{top:M(e.top),left:M(e.left),width:M(e.right-e.left),height:M(e.bottom-e.top)}}function B(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:location.search,t={};return!e||e.length<2?t:(e=e.slice(1),e=e.split("&"),e.map(function(e){e=e.split("="),t[e[0]]=e[1]}),t)}function j(e){var t=[];for(var n in e)t.push(n+"="+e[n]);return"?"+t.join("&")}function F(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"image/png";e=e.split(",")[1],e=window.atob(e);var n=new Uint8Array(e.length);for(var r=0;r<e.length;r++)n[r]=e.charCodeAt(r);var i=new Blob([n],{type:t});return i}function I(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(e){t(new Uint8Array(e.target.result))},r.readAsArrayBuffer(e)})}function q(e){var t=document.createElement("pre"),n=document.createTextNode(e);return t.appendChild(n),t.innerHTML}function R(e){var t=document.createElement("div");return t.innerHTML=e,t.innerText.trim()}function U(e,t,n){var r=void 0,i=0;return function(){for(var s=arguments.length,o=Array(s),u=0;u<s;u++)o[u]=arguments[u];var a=this,f=function(){i=Date.now(),e.apply(a,o)},l=Date.now()-i,c=n&&!r||l>=t;clearTimeout(r),c?f():r=setTimeout(f,t-l)}}function z(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}function W(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}function X(){return new Promise(function(e){if(!document.getElementById("editor-loader")){e();return}setTimeout(function(){$("#editor-loader").addClass("leave"),setTimeout(function(){$("#editor-loader").addClass("remove"),e()},550)},500)})}function V(){var e=function t(e){e.preventDefault(),document.removeEventListener("contextmenu",t)};document.addEventListener("contextmenu",e)}function J(e){if(Array.isArray(e))return e.map(function(e){return J(e)});if(v(e)){var t={};for(var n in e)t[n]=J(e[n]);return t}return e}function K(e,t,n){if(!e||!t||!v(t))return!1;for(var r in t)v(t[r])?e[r]?K(e[r],t[r],n):n?n(e,r,t[r]):e[r]=t[r]:n?n(e,r,t[r]):e[r]=t[r];return e}function Q(e){var t=e.parentElement,n=e.outerHTML;while(t.parentElement)n=t.outerHTML.replace(t.innerHTML,n),t=t.parentElement;return n}function G(){}function Y(e,t,n){var r=!1,i=t.length;e=~~e;if(t.length<1)return r;if(e<t[0].n-n||e>t[i-1]+n)return r;var s=Math.abs(e-t[0].n);for(var o=0;o<i;o++){var u=e-t[o].n;if(Math.abs(u)>s)return r;Math.abs(u)<=n&&(r=Object.assign({},t[o],{delta:u}))}return r}function Z(e){if(!!g(e.children))return g(e.innerText)?!1:e;var t=e.children;for(var n in t){var r=Z(t[n]);if(r)return r}}function et(){return tt()+tt()+"-"+tt()+"-"+tt()+"-"+tt()+"-"+tt()+tt()+tt()}function tt(){return((1+Math.random())*65536|0).toString(16).substring(1)}function nt(e,t){return e[t]==="auto"?e["_"+t]?e["_"+t]:0:e[t]}function rt(e,t){return _(nt(e,t))+2*(_(e["border-width"])||0)+2*(_(e.padding)||0)}function it(e){return e.offsetHeight-2*(_(e.style.borderWidth)||0)-2*(_(e.style.padding)||0)}function st(e){return e.offsetWidth-2*(_(e.style.borderWidth)||0)-2*(_(e.style.padding)||0)}function ot(e,t){return e*(t.scale||t.zoom||1)}function ut(e,t,n,r){return m(e.left)&&(e.left=at(e.left,t.left,n),r&&(e.left=M(e.left))),m(e.top)&&(e.top=at(e.top,t.top,n),r&&(e.top=M(e.top))),m(e.width)&&(e.width=ot(e.width,n),r&&(e.width=M(e.width))),m(e.height)&&(e.height=ot(e.height,n),r&&(e.height=M(e.height))),e}function at(e,t,n){return n.scale?e=e*n.scale+t:n.zoom?e=(e+t)*n.zoom:e+=t,e}function ft(e){return new Promise(function(t,n){try{var r=new Image;r.onload=function(){window.getImageColorContext||(window.getImageColorCanvas=document.createElement("canvas"),window.getImageColorCanvas.width=document.body.clientWidth,window.getImageColorCanvas.height=window.innerHeight,window.getImageColorContext=window.getImageColorCanvas.getContext("2d"));var e=window.getImageColorContext;e.clearRect(0,0,r.width,r.height),e.drawImage(r,0,0,r.width,r.height);var n=e.getImageData(0,0,r.width,r.height).data,i=0,s=0,o=0,u=0,a=0,f=0,l=0,c=void 0,h=void 0;for(var p=0;p<n.length;p+=4)i++,u+=n[p],a+=n[p+1],f+=n[p+2],l+=n[p+3],h=.299*n[p]+.7152*n[p+1]+.0722*n[p+2],c=h-o,s+=c*c,o+=c/i;var d=Math.sqrt(s/i)/255;o/=255,u/=i||1,a/=i||1,f/=i||1,l/=(i||1)/255,t({color:"rgb("+u+", "+a+", "+f+")",complex:d>.3,dark:o<.5,opacity:l})},r.crossOrigin="",r.src=e}catch(i){console.error(i),n(i)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.inMobileFun=r,n.d(t,"inBrowser",function(){return i}),n.d(t,"inSafari",function(){return s}),n.d(t,"inWx",function(){return u}),n.d(t,"in360",function(){return a}),n.d(t,"inIE",function(){return f}),n.d(t,"inFirefox",function(){return l}),n.d(t,"inPC",function(){return c}),n.d(t,"inMac",function(){return h}),n.d(t,"inIpad",function(){return p}),n.d(t,"inMobile",function(){return d}),t.isObject=v,t.isNumeric=m,t.isEmpty=g,t.isEvent=y,t.isPos=b,t.isString=w,t.isUrl=E,t.isHttpsUrl=S,t.isSeparate=x,t.isTangent=T,t.isIntersects=N,t.isContain=C,t.isChildNode=k,t.isPosterityNode=L,t.hasTextBetweenTag=A,t.hasIframe=O,t.transNumberIntoPixel=M,t.transPixelIntoNumber=_,t.serializeFunction=D,t.transStylesIntoEdge=P,t.transEdgeIntoStyles=H,t.search2obj=B,t.obj2search=j,t.dataurl2blob=F,t.blob2buffer=I,t.encode4Html=q,t.encode4PureStr=R,t.debounce=U,t.launchIntoFullscreen=z,t.exitFullscreen=W,t.removeLoader=X,t.banContextMenuForOnce=V,t.deepClone=J,t.objectDeepAssign=K,t.getBranchToPureTextNode=Q,t.addCommentBox=G,t.findInSnapHelper=Y,t.findPureTextNode=Z,t.uuid=et,t.S4=tt,t.getAutoStylesValue=nt,t.getBorderBoxSize=rt,t.getRealHeight=it,t.getRealWidth=st,t.calSizeWithZoomScale=ot,t.calStyleWithZoomScaleAndOffset=ut,t.calPosWithZoomScaleAndOffset=at,t.getImageColor=ft;var i=typeof window!="undefined"&&Object.prototype.toString.call(window)!=="[object Object]",s=i&&navigator.userAgent.indexOf("Safari")!==-1&&navigator.userAgent.indexOf("Chrome")===-1,u=i&&/micromessenger/.test(navigator.userAgent.toLowerCase()),a=i&&navigator.userAgent.indexOf("Chrome")!==-1&&navigator.mimeTypes&&o("type","application/vnd.chromium.remoting-viewer"),f=i&&window.ActiveXObject!==undefined,l=i&&navigator.userAgent.indexOf("Firefox")!==-1,c=i&&(navigator.userAgent.indexOf("Windows")!==-1||navigator.userAgent.indexOf("Macintosh")!==-1),h=i&&navigator.userAgent.indexOf("Macintosh")!==-1,p=i&&navigator.userAgent.indexOf("iPad")!==-1,d=i&&r(navigator.userAgent)},140:function(e,t,n){"use strict";function o(){if(window.OfflineData&&window.OfflineData.slide_id){s=window.OfflineData.slide_id;return}s=location.pathname.match(/(d|p|embed|editor)\/([^/]+)/)?location.pathname.match(/(d|p|embed|editor)\/([^/]+)/)[2]:i.slide_id}Object.defineProperty(t,"__esModule",{value:!0});var r=n(14);n.d(t,"slide_id",function(){return s}),t.getSlideId=o,n.d(t,"embedStyle",function(){return u}),n.d(t,"path",function(){return a}),n.d(t,"isLogin",function(){return f}),n.d(t,"user_name",function(){return l});var i=r.inBrowser?n.i(r.search2obj)():{},s=void 0;r.inBrowser&&o();var u=i.style,a=r.inBrowser&&function(){var e=location.pathname.match(/\/([^/]+)(\/|$)/)&&location.pathname.match(/\/([^/]+)(\/|$)/)[1];if(!e)return"index";if(e.length===1){var t={d:"display",p:"present"};return t[e]}return e}(),f=r.inBrowser&&!n.i(r.isEmpty)(window.SD&&window.SD.myself),l=r.inBrowser&&(f?window.SD.myself.user_name:"noLogin")},141:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__util__=__webpack_require__(14);Array.prototype.fill||(Array.prototype.fill=function(e){if(this==null)throw new TypeError("this is null or not defined");var t=Object(this),n=t.length>>>0,r=arguments[1],i=r>>0,s=i<0?Math.max(n+i,0):Math.min(i,n),o=arguments[2],u=o===undefined?n:o>>0,a=u<0?Math.max(n+u,0):Math.min(u,n);while(s<a)t[s]=e,s++;return t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(this==null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof t!="function")throw new TypeError("predicate must be a function");var n=Object(this),r=n.length>>>0,i=arguments[1];for(var s=0;s!==r;s++)if(t.call(i,this[s],s,n))return this[s];return undefined}}),Array.prototype.findIndex=Array.prototype.findIndex||function(evaluator,thisArg){if(!this)throw new TypeError("Array.prototype.some called on null or undefined");if(typeof evaluator!="function"){if(typeof evaluator!="string")throw new TypeError;if(!(evaluator=eval(evaluator)))throw new TypeError}var i;if(thisArg===undefined){for(i in this)if(evaluator(this[i],i,this))return i;return-1}for(i in this)if(evaluator.call(thisArg,this[i],i,this))return i;return-1},__WEBPACK_IMPORTED_MODULE_0__util__.inBrowser&&!HTMLElement.prototype.isSameNode&&(HTMLElement.prototype.isSameNode=function(e){return this===e})},29:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=n.n(r);t["default"]=new i.a},344:function(e,t,n){"use strict";var r=n(142),i=n.n(r),s=n(376),o=n.n(s),u=n(373),a=n.n(u),f=n(375),l=n.n(f),c=n(141),h=n(345),p=n(346)},345:function(e,t,n){"use strict";var r=n(377),i=n.n(r),s=n(137),o=n.n(s)},346:function(e,t,n){"use strict";var r=n(138),i=n.n(r),s=n(378),o=n.n(s),u=n(14);if(u.inBrowser){var a=$(document.body),f=$(".Header"),l=f.find(".Header-logo--light"),c=f.find(".Header-logo--dark"),h=f.find(".Header-searchPage"),p=h.find(".Header-searchPageForm"),d=function(t){t==="light"?(l.removeClass("is-hidden"),c.addClass("is-hidden")):(l.addClass("is-hidden"),c.removeClass("is-hidden"))},v=function(){var t=$(window).scrollTop();t!==0?(f.addClass("Header--light"),d("dark")):(f.removeClass("Header--light"),d("light"))},m=function(t){t==="show"?(h.removeClass("is-hidden"),f.removeClass("Header--light"),d("light")):(h.addClass("is-hidden"),v())};a.on("click",".Header-search",function(e){m("show"),f.removeClass("showMenu")}).on("click",".Header-searchPageForm",function(e){e.stopPropagation()}).on("submit",".Header-searchPageForm",function(e){e.preventDefault();var t=p[0];t.submit(),t.reset()}).on("click",".Header-searchPageCancel",function(e){$(".Header-searchPageKw").val("")}).on("click",".Header-searchPage",function(e){m("hide"),p[0].reset()}).on("click",function(e){var t=$(e.target).closest(".Header-content").length>0,n=$(e.target).closest(".Header-fold").length>0;!t&&!n&&f.removeClass("showMenu")}).on("click",".Header-fold",function(e){m("hide"),f.toggleClass("showMenu")})}},348:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=t.warn,r=n===undefined?!0:n,s=t.needError,o=s===undefined?!1:s,u=t.tipFn;i(this,e),this.protocol=location.protocol,this.host=location.host,this.prefix=this.protocol+"//"+this.host,this.warn=r,this.needError=o,this.tipFn=u}return r(e,[{key:"GET",value:function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},i=Object.assign({url:this.prefix+t,type:"GET",data:n,timeout:2e4,_t:Date.now()},r);return $.ajax(i).then(this.done,this.fail)}},{key:"POST",value:function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=this,i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},s=arguments[3];n.token=SD.token;var o=Object.assign({url:this.prefix+t,type:s||"POST",data:n,timeout:2e4},i);return $.ajax(o).then(function(){return r.done.apply(r,arguments)},function(){return r.fail.apply(r,arguments)})}},{key:"PUT",value:function(t,n,r){return this.POST(t,n,r,"PUT")}},{key:"DELETE",value:function(t){var n=this,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},i=Object.assign({url:this.prefix+t,type:"DELETE",data:{token:SD.token},contentType:!1},r);return $.ajax(i).then(function(){return n.done.apply(n,arguments)},function(){return n.fail.apply(n,arguments)})}},{key:"FORMDATA",value:function(t,n){var r=this,i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};n.append("token",SD.token);var s=Object.assign({url:this.prefix+t,type:"POST",contentType:!1,data:n,processData:!1},i);return $.ajax(s).then(function(){return r.done.apply(r,arguments)},function(){return r.fail.apply(r,arguments)})}},{key:"done",value:function(t,n,r){var i=this;return new Promise(function(e,n){return t.errno!==0?(i.warn&&(console.warn(t),t.errmsg&&i.tipFn&&i.tipFn(t.errmsg)),n(t)):e(t.data)})}},{key:"fail",value:function(t,n,r){var i=this;return new Promise(function(e,t){throw console.error(n,r),i.tipFn&&i.tipFn(r||"网络故障～～"),new Error(r||"网络故障~~")})}}]),e}();t["default"]=s},349:function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=n(14),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o={};try{window.localStorage&&(o.localStorage=window.localStorage)}catch(u){}r.inBrowser&&!o.localStorage&&Object.defineProperty(o,"localStorage",new function(){var e=[],t={};Object.defineProperty(t,"getItem",{value:function(t){return t?this[t]:null},writable:!1,configurable:!1,enumerable:!1}),Object.defineProperty(t,"key",{value:function(n){return e[n]},writable:!1,configurable:!1,enumerable:!1}),Object.defineProperty(t,"setItem",{value:function(t,n){if(!t)return;document.cookie=escape(t)+"="+escape(n)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/"},writable:!1,configurable:!1,enumerable:!1}),Object.defineProperty(t,"length",{get:function(){return e.length},configurable:!1,enumerable:!1}),Object.defineProperty(t,"removeItem",{value:function(t){if(!t)return;document.cookie=escape(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/"},writable:!1,configurable:!1,enumerable:!1}),this.get=function(){var n=void 0;for(var r in t)n=e.indexOf(r),n===-1?t.setItem(r,t[r]):e.splice(n,1),delete t[r];for(e;e.length>0;e.splice(0,1))t.removeItem(e[0]);for(var i,s,o=0,u=document.cookie.split(/\s*;\s*/);o<u.length;o++)i=u[o].split(/\s*=\s*/),i.length>1&&(t[s=unescape(i[0])]=unescape(i[1]),e.push(s));return t},this.configurable=!1,this.enumerable=!0});var a=function(){function e(){s(this,e)}return i(e,[{key:"setSlide",value:function(t,n,r){this.wrap({key:"slide-"+n,data:Object.assign({},t,{user_name:r})})}},{key:"getSlide",value:function(t,i){var s=this.unpack({key:"slide-"+t,parse:!0});return!n.i(r.isObject)(s)||s.user_name!==i&&s.user_name!=="noLogin"?{}:s}},{key:"delSlide",value:function(t){this._delItem("slide-"+t)}},{key:"wrap",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},i=t.key,s=t.data,o=t.expire;n.i(r.isString)(s)||(s=JSON.stringify(s)),n.i(r.isNumeric)(o)?o=Date.now()+o:o=Date.now()+2592e6;var u=JSON.stringify({data:s,expire:o,lastUpdate:Date.now()});this._setItem(i,u)||this._setItem(i,u)}},{key:"unpack",value:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=t.key,r=t.parse,i=t.expire,s=i===undefined?!0:i;try{var u=o.localStorage.getItem(n);if(!u)return;try{u=JSON.parse(u)}catch(a){throw new Error(n+"数据遭到破坏，无法解析"+a)}if(s&&Date.now()>u.expire)throw new Error(n+"本地存储已过期。"+Date.now()-u.expire);return r&&(u.data=JSON.parse(u.data)),u.data}catch(a){this._delItem(n)}}},{key:"_delItem",value:function(t){try{o.localStorage.removeItem(t)}catch(n){}}},{key:"_setItem",value:function(t,n){try{return o.localStorage.setItem(t,n),!0}catch(r){return this._clear(),!1}}},{key:"_clear",value:function(){try{var t=!0,i=o.localStorage.length;for(var s=0;s<i;s++){var u=o.localStorage.key(s);if(u==="spectrum")continue;var a=o.localStorage.getItem(u);if(!n.i(r.isString)(a))t=!1,o.localStorage.removeItem(u);else{var f=void 0;try{f=JSON.parse(a)}catch(l){t=!1,o.localStorage.removeItem(u);continue}if(!f.expire||f.expire<Date.now())t=!1,o.localStorage.removeItem(u)}}t&&o.localStorage.clear()}catch(c){}}},{key:"pageBackgroundSize",set:function(t){this.wrap({key:"page-background-size",data:t})},get:function(){var t=this.unpack({key:"page-background-size"});return!t||!t.match(/^cover|contain|initial$/)?"cover":t}},{key:"lineEndPoint",set:function(t){this.wrap({key:"line-end-point",data:t})},get:function(){var t=this.unpack({key:"line-end-point",parse:!0});return n.i(r.isEmpty)(t)?{start:0,end:0}:t}},{key:"veteran",set:function(t){this.wrap({key:"veteran",data:t})},get:function(){return this.unpack({key:"veteran",expire:!1})}},{key:"introduction",set:function(t){this.wrap({key:"introduction",data:t})},get:function(){return this.unpack({key:"introduction",parse:!0,expire:!1})}},{key:"version",set:function(t){this.wrap({key:"version",data:t})},get:function(){return this.unpack({key:"version",expire:!1})}},{key:"tourRoute",set:function(t){this.wrap({key:"tour-route",data:t})},get:function(){return this.unpack({key:"tour-route",expire:!1,parse:!0})||{}}},{key:"tempid",get:function(){var t=this.unpack({key:"tempid",expire:!1});if(t)return t;t=n.i(r.uuid)(),this.wrap({key:"tempid",data:t})}},{key:"chooseInGroup",set:function(t){this.wrap({key:"choose-in-group",data:t,expire:6048e5})},get:function(){return window._knewHowToChooseInGroup||(window._knewHowToChooseInGroup=this.unpack({key:"choose-in-group"})),window._knewHowToChooseInGroup}}]),e}();t["default"]=new a},354:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"pluginName",function(){return r}),n.d(t,"errorTips",function(){return i}),n.d(t,"remindTips",function(){return s}),n.d(t,"popupTips",function(){return o}),n.d(t,"notifications",function(){return u});var r={"plugin-text":"文本","plugin-image":"图片","plugin-shape":"形状","plugin-line":"线条","plugin-code":"代码","plugin-iframe":"iframe","plugin-table":"表格","plugin-group":"组","plugin-highlighter":"高亮区域"},i={MODIFY_LOCKED:"不能修改被锁对象的样式",NEED_UNLOCKED:"选中未被锁定的元素或者组才可进行此操作",NEED_UNLOCKED_CHAIN:"选中多个未被锁定的元素或者组才可进行此操作",SHARE_WITHOUT_SAVE:"保存幻灯片后才可以分享哦",EXPORT_WITHOUT_SAVE:"保存幻灯片后才可以导出哦"},s={USE_ALT:"你可以在点击的同时按下alt/opt键选择组内元素哦",LEAVE_WITHOUT_SAVE:"你正在编辑的slide尚未保存，确定要离开吗？"},o={EXPORT_WITHOUT_LOGIN:"导出功能需要登录后才能使用。",SAVE_WITHOU_LOGIN:"云端保存功能只有登录后方可使用。",CREATE_WITHOU_LOGIN:"通过模版创建PPT功能只有在登录后才能使用",UPLOAD_IMAGE_WITHOUT_LOGIN:"登录才可以上传图片。",EDITER_PPT_NOW:"PPT创建成功是否现在就去编辑？",YOURS_TEMPLATE_WITHOUT_LOGIN:"我的模板功能需要登录后才能使用。",ADD_TEMPLATE_WITHOUT_LOGIN:"模板功能需要登录后才能使用。",COLLECT_WITHOUT_LOGIN:"收藏功能需要登录后才能使用。",HAS_UNLOGIN_SLIDE:"检测到您浏览器中存有未登录时创建的幻灯片，是否继续编辑？",RESERVER_UNLOGIN_SLIDE:"检测到未登录时创建的幻灯片页数较多，是否需要保留以便日后编辑？",NEED_LOGIN:"是否需要登录呢？"},u={SAVE_TITLE:"离线数据云端保存成功～",SAVE_SLIDE_INFO:"的设置云端保存成功～",SAVE_SLIDE_CONFIG:"的数据云端保存成功～"}},380:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"slidePermissionType",function(){return r});var r={PUBLIC:[0,3],SELF_VISIBLE:1,NEED_CODE:2,INTRANET:3}},394:function(e,t,n){"use strict";var r=n(53),i=n.n(r),s=n(487),o=n(454),u=n(463),a=n(461),f=n(456),l=n(465),c=n(459),h=n(462),p=n(455),d=n(460),v=n(458),m=n(464),g=n(457);i.a.use(s.a),i.a.component("plugin-base",o["default"]),i.a.component("plugin-slide",u["default"]),i.a.component("plugin-page",a["default"]),i.a.component("plugin-group",f["default"]),i.a.component("plugin-text",l["default"]),i.a.component("plugin-image",c["default"]),i.a.component("plugin-shape",h["default"]),i.a.component("plugin-code",p["default"]),i.a.component("plugin-line",d["default"]),i.a.component("plugin-iframe",v["default"]),i.a.component("plugin-table",m["default"]),i.a.component("plugin-highlighter",g["default"])},395:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(14);n.d(t,"share",function(){return o});var i={};if(r.inBrowser){var s=n(348).default;i=new s({warn:!1})}var o={add:function(t){return i.POST("/api/share/add",{slide_id:t})},getcode:function(t){return i.GET("/api/share/getcode",{slide_id:t})},permissionvalidate:function(t){var n=t.slide_id,r=t.share_code;return i.POST("/api/share/permissionvalidate",{slide_id:n,share_code:r})}}},430:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(14);n.d(t,"user",function(){return o});var i={};if(r.inBrowser){var s=n(348).default;i=new s({warn:!1})}var o={detail:function(){return window.SD.myself?Promise.resolve(window.SD.myself):r.inBrowser?Promise.resolve({}):i.GET("/api/user/detail")},checkunique:function(t,n){return i.GET("/api/user/checkunique",{field:t,value:n})},update:function(t){return i.POST("/api/user/update",t)},publicInfo:function(t){return r.inBrowser&&window.SD.author&&(window.SD.author.user_name===t||!t)?Promise.resolve(window.SD.author):(t=t||r.inBrowser&&window.SD.myself&&window.SD.myself.user_name,i.GET("/api/user/publicinfo",{user_name:t}))},importPDF:function(t){return i.FORMDATA("/api/slide/import",t)},search:function(t){return i.FORMDATA("/api/user/list",t)}}},433:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=n(517),i=n(528);n.d(t,"magicMoveSetScheme",function(){return f}),n.d(t,"magicMoveUnsetScheme",function(){return l}),n.d(t,"magicMoveBeforeStyle",function(){return c}),n.d(t,"magicMoveIntroStyle",function(){return h});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){o(this,e),this.counter={}}return s(e,[{key:"get",value:function(t){return t in this.counter?++this.counter[t]:(this.counter[t]=0,0)}}]),e}(),a=function(t,n){r.a.dispatch("EDITPAGE",{pageIndex:t,data:{magicmove:n}}),r.a.dispatch("EDITPAGE",{pageIndex:t+1,data:{magicmove_animated:n}})},f=function(t){var s=r.a.state.slide.pages,o=s[t],f=s[t+1];a(t,!0);if(!f)return;var l=new u,c=new u,h=o.elements.filter(function(e){return e.fragment}).reduce(function(e,t){return t.index>e?t.index:e},0),p=o.elements.filter(function(e){return n.i(i.a)(e.type)&&(!e.fragment||e.fragment&&e.fragment.index===h)}).map(function(e,t){return n.i(i.b)(e,{index:t,occur:l.get(e.type)})}),d=f.elements.map(function(e,t){return n.i(i.b)(e,{index:t,occur:c.get(e.type)})}).filter(function(e){return!e.animation&&!e.fragment&&n.i(i.a)(e.type)});d.forEach(function(e){var n=p.filter(function(t){return e.signature===t.signature});if(n.length){var i=n[0],s={magicMove:{top:{from:i.top,to:e.top-i.top},left:{from:i.left,to:e.left-i.left},rotate:{from:i.rotateRad,to:e.rotateRad},width:{from:i.width,to:e.width},height:{from:i.height,to:e.height},color:{from:i.colorRGB,to:e.colorRGB}}};r.a.dispatch("EDITELEMENT",{pageIndex:t+1,elementIndex:e.index,data:s})}else r.a.dispatch("DELELEMENTATTR",{pageIndex:t+1,elementIndex:e.index,data:{magicMove:1}})})},l=function(t){var n=r.a.state.slide.pages,i=n[t+1];a(t,!1);if(!i)return;i.elements.forEach(function(e,n){r.a.dispatch("DELELEMENTATTR",{pageIndex:t+1,elementIndex:n,data:{magicMove:1}})})},c=function(t){return{left:t.left.from+"px",top:t.top.from+"px",transform:"\n              rotate("+t.rotate.from+"rad)\n            ",width:t.width.from+"px",height:t.height.from+"px",color:t.color.from}},h=function(t,n){return{transform:"\n              translate("+t.left.to+"px, "+t.top.to+"px) \n              rotate("+t.rotate.to+"rad)\n            ","transition-duration":n?"0":"1s","transition-delay":n?"0":"0.3s",width:t.width.to+"px",height:t.height.to+"px",color:t.color.to}}},451:function(e,t,n){"use strict";function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(14),i=n(136),s=n(430),o=n(140),u=n(349),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();r.inBrowser&&(n(347),n(437));var l=function(){function e(t){f(this,e),r.inBrowser&&this.init()}return a(e,[{key:"init",value:function(){this.remoteReady=!1,this.userCheck=!1,this.remoteTasks=[],this.myUser={},this.source={config:"remote",info:"remote",noLogin:!1,noSave:!1},this.asyncUser(),this.asyncSlide()}},{key:"getLocalSlide",value:function(){var t=void 0;if(!o.slide_id||!this.myUser.user_name){t=u["default"].getSlide("noLogin","noLogin");if(n.i(r.isEmpty)(t)){if(!this.myUser.user_name)return;t=u["default"].getSlide("noSave",this.myUser.user_name),this.source.noSave=!0}this.source.noLogin=!this.source.noSave}else t=u["default"].getSlide(o.slide_id,this.myUser.user_name);this.localSlide=t.slide_config,delete t.slide_config,this.localSlideInfo=t}},{key:"asyncSlide",value:function(){var t=this;o.slide_id?i.slide.detail(o.slide_id).then(function(e){var i=e.slide_config;delete e.slide_config,t.remoteSlideInfo=e,n.i(r.isString)(i)&&(i=JSON.parse(i)),t.remoteSlide=i,t.remoteReady=!0,t.run()},function(e){t.remoteReady=!0,t.run()}):(SD.slide&&SD.slide.slide_config&&(this.remoteSlide=SD.slide.slide_config),this.remoteReady=!0,this.run())}},{key:"asyncUser",value:function(){var t=this;s.user.detail().then(function(e){t.myUser=e,t.getLocalSlide(),t.userCheck=!0,t.run()},function(e){t.getLocalSlide(),t.userCheck=!0,t.run()})}},{key:"awaitReturn",value:function(t){var n=this;return new Promise(function(e,r){n.remoteReady&&n.userCheck?t(e,r):n.remoteTasks.push(function(){return t(e,r)})})}},{key:"run",value:function(){this.remoteReady&&this.userCheck&&this.remoteTasks.forEach(function(e){return e()})}},{key:"getLatestSlide",value:function(){var t=this;return this.awaitReturn(function(e,i){!n.i(r.isEmpty)(t.localSlide)&&!n.i(r.isEmpty)(t.remoteSlide)&&!n.i(r.isEmpty)(t.remoteSlideInfo)&&!n.i(r.isEmpty)(t.localSlideInfo)&&t.remoteSlideInfo.slide_info_version===t.localSlideInfo.slide_info_version&&t.localSlide._t>t.remoteSlide._t?(t.source.config="local",e(t.localSlide)):!n.i(r.isEmpty)(t.remoteSlide)&&!n.i(r.isEmpty)(t.remoteSlideInfo)?e(t.remoteSlide):n.i(r.isEmpty)(t.localSlide)?n.i(r.isEmpty)(t.remoteSlide)?o.slide_id?location.href="/editor":e():e(t.remoteSlide):(t.source.config="local",e(t.localSlide))})}},{key:"getSlideInfo",value:function(){var t=this;return this.awaitReturn(function(e,i){var s={};!n.i(r.isEmpty)(t.remoteSlideInfo)&&!n.i(r.isEmpty)(t.localSlideInfo)?t.remoteSlideInfo.slide_info_version===t.localSlideInfo.slide_info_version&&!n.i(r.isEmpty)(t.localSlide)&&!n.i(r.isEmpty)(t.remoteSlide)&&t.localSlide._t>t.remoteSlide._t?(s=t.localSlideInfo,t.source.info="local"):s=t.remoteSlideInfo:n.i(r.isEmpty)(t.remoteSlideInfo)?n.i(r.isEmpty)(t.localSlideInfo)||(s=t.localSlideInfo):s=t.remoteSlideInfo,s.user_name=t.myUser.user_name||"noLogin",e(s)})}},{key:"getRemoteSlide",value:function(){var t=this;return this.userCheck=!0,this.awaitReturn(function(e,n){return e(t.remoteSlide)})}}]),e}();t.a=new l},466:function(e,t,n){"use strict";var r=n(14);n.d(t,"b",function(){return i}),n.d(t,"a",function(){return s});var i={type:"present",slide:{config:{width:960,height:720,maxScale:1.5,minScale:.1,fragments:!0,keyboard:!0,center:!1,transition:"slide",backgroundTransition:"slide"},colors:{name:"white-blue","background-color":"#ffffff",color:"#000000",link:"#106bcc"},font:"modern",pages:[{id:n.i(r.uuid)(),elements:[],numbers:{},magicmove:!1}],_t:0,_v:0,version:1},editor:{elementIndex:-1,pageIndex:0,groupIndex:!1,chain:[],ckeditorOperating:!1,grid:{width:960,height:720},slideConfig:{maxScale:1,fragments:!1,minScale:1,help:!1,showNotes:!1,history:!0,touch:!1,keyboard:!1},zoomScale:{zoom:!1,scale:!1},pagesPanelOffset:{top:0,left:0,editingLeftBias:240},pagebarPosition:"right",copyData:[],copyPages:[],slideInfo:{slide_title:SD.env.slide.defaultTitle,slide_desc:"",slide_autoplay_interval:0,slide_permission:0,slide_info_version:0},latestNotes:{},latestAudios:{},operation:-1,coverEdited:!1,rookie:!1},shadow:{z:[],y:[],x:null}},s=n.i(r.deepClone)(i)},487:function(e,t,n){"use strict";function o(e,t,n){function b(e){var n=e.touches[0];d=n.pageX-h,v=n.pageY-p,m===undefined&&(m=Math.abs(v)>Math.abs(d)?s:i),t==="horizontal-swipe"&&m===i&&e.preventDefault(),t==="vertical-swipe"&&m===s&&e.preventDefault()}function w(e){l.removeEventListener("touchmove",b),l.removeEventListener("touchend",w),l.removeEventListener("touchcancel",w),y=new Date-g;if(Math.abs(d)<f&&Math.abs(v)<f)if(y<a){if(t!=="tap")return;n()}else if(y>u){if(t!=="longtap")return;n()}if(m===s){if(t!=="vertical-swipe")return;var r=v;if(Math.abs(r)>=o){var i=r>0?"down":"up";n(i)}}else{if(t!=="horizontal-swipe")return;var c=d;if(Math.abs(c)>=o){var h=c>0?"right":"left";n(h)}}}var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},i=1,s=2,o=30,u=1e3,a=250,f=5,l=document.body,c=void 0,h=void 0,p=void 0,d=void 0,v=void 0,m=void 0,g=void 0,y=void 0;e.addEventListener("touchstart",function(e){l.removeEventListener("touchmove",b),l.removeEventListener("touchend",w),l.removeEventListener("touchcancel",w),c=e.touches[0],h=c.pageX,p=c.pageY,d=0,v=0,m=undefined,g=new Date,l.addEventListener("touchmove",b,{passive:!1}),l.addEventListener("touchend",w,{passive:!1}),l.addEventListener("touchcancel",w,{passive:!1})})}var r=n(53),i=n.n(r),s={install:function(){i.a.directive("gesture",{inserted:function(t,n,r){var i=n.arg,s=n.value;o(t,i,s,n.modifiers)}})}};t.a=s},517:function(e,t,n){"use strict";var r=n(518),i=n.n(r),s=n(532);t.a=new i.a.Store(s.a)},528:function(e,t,n){"use strict";var r=n(531),i=n(530),s=n(529);n.d(t,"a",function(){return u}),n.d(t,"b",function(){return f});var o={"plugin-text":r.a,"plugin-shape":i.a,"plugin-image":s.a},u=function(t){return!!o[t]},a=function(t,n,r){var i=t.styles;return{left:parseInt(i.left),top:parseInt(i.top),width:parseInt(i.width),height:parseInt(i.height)||parseInt(i._height)||"auto",rotateRad:t.rotate||0,colorRGB:i.color||"rgb(255, 255, 255)",index:n,type:t.type,signature:r}},f=function(t,n){var r=o[t.type];return r?a(t,n.index,r(t,n)):{}}},529:function(e,t,n){"use strict";t.a=function(e,t){return e.src+t.occur}},530:function(e,t,n){"use strict";t.a=function(e,t){return e.code+t.occur}},531:function(e,t,n){"use strict";t.a=function(e,t){var n=document.createElement("div");return n.innerHTML=e.content,n.innerText}},532:function(e,t,n){"use strict";var r=n(534),i=n(533),s=n(466);t.a={state:s.a,mutations:i,plugins:r.a}},533:function(e,t,n){"use strict";function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function d(e,t){var r=t.slide;n.i(s.objectDeepAssign)(e.slide,u.a.check(r),i.a.set)}function v(e,t){var r=t.data;n.i(s.objectDeepAssign)(e.slide.config,r,i.a.set)}function m(e,t){var r=t.data;n.i(s.objectDeepAssign)(e.slide,r,i.a.set)}function g(e,t){var n=t.pageIndex,r=n===undefined?e.editor.pageIndex:n,s=t.data,o=t.add,u=o===undefined?!1:o;if(u)if(s instanceof Array){var a;(a=e.slide.pages).splice.apply(a,[r,0].concat(p(s)))}else e.slide.pages.splice(r,0,s);else i.a.set(e.slide.pages,r,s)}function y(e,t){t=Math.max(0,Math.min(t,e.slide.pages.length-1)),i.a.set(e.editor,"pageIndex",t)}function b(e,t){var n=t.pageIndex,r=n===undefined?e.editor.pageIndex:n,s=t.notes,o=t.init,u=o===undefined?!1:o;if(u)e.editor.latestNotes=s;else{var a=e.slide.pages[r];i.a.set(a,"notes",s),s?i.a.set(e.editor.latestNotes,a.id,s):i.a.delete(e.editor.latestNotes,a.id)}}function w(e,t){var r=t.pageIndex,o=r===undefined?e.editor.pageIndex:r,u=t.data;n.i(s.objectDeepAssign)(e.slide.pages[o],u,i.a.set)}function E(e,t){var n=t.a,r=t.b;n=Math.min(Math.max(n,0),e.slide.pages.length-1),r=Math.min(Math.max(r,0),e.slide.pages.length-1);var s=e.slide.pages[n];i.a.set(e.slide.pages,n,e.slide.pages[r]),i.a.set(e.slide.pages,r,s)}function S(e,t){var n=t.selectedIndice,r=t.toIndex,i=t.pos;i==="after"&&r++,n=n.slice(),n.sort(function(e,t){return t-e});var s=0,o=!0,u=!1,a=undefined;try{for(var f=n[Symbol.iterator](),l;!(o=(l=f.next()).done);o=!0){var h=l.value;h<r&&s++}}catch(p){u=!0,a=p}finally{try{!o&&f.return&&f.return()}finally{if(u)throw a}}var d=e.slide.pages,v=[],m=!0,g=!1,y=undefined;try{for(var b=n[Symbol.iterator](),w;!(m=(w=b.next()).done);m=!0){var E=w.value,S=d.splice(E,1),x=c(S,1),T=x[0];v.unshift(T)}}catch(p){g=!0,y=p}finally{try{!m&&b.return&&b.return()}finally{if(g)throw y}}var N=r-s;d.splice.apply(d,[N,0].concat(v))}function x(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:e.editor.pageIndex;e.slide.pages.length>1&&e.slide.pages.splice(t,1)}function T(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=t.group,r=t.pageIndex,s=r===undefined?e.editor.pageIndex:r,o=e.slide.pages[s];o.groups?i.a.set(o.groups,n.id,n):i.a.set(o,"groups",h({},n.id,n))}function N(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.pageIndex,o=r===undefined?e.editor.pageIndex:r,u=e.slide.pages[o],a=n.i(s.deepClone)(u.groups);for(var f in a)a[f].elements=[];u.elements.forEach(function(e,t){e.group&&a[e.group].elements.push(t)}),n.i(s.objectDeepAssign)(u.groups,a,i.a.set)}function C(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.groupIndex,o=r===undefined?e.editor.groupIndex:r,u=t.pageIndex,a=u===undefined?e.editor.pageIndex:u,f=e.slide.pages[a],l=f.groups&&f.groups[o];if(n.i(s.isEmpty)(l))return;var c=f.elements,h=l.elements.reduce(function(e,t){var r=n.i(s.transStylesIntoEdge)(c[t].styles);return Object.keys(r).forEach(function(t){if(e[t]===undefined){e[t]=r[t];return}t.match(/top|left/)?e[t]=Math.min(e[t],r[t]):e[t]=Math.max(e[t],r[t])}),e},{});n.i(s.objectDeepAssign)(l.styles,n.i(s.transEdgeIntoStyles)(h),i.a.set)}function k(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.groupIndex,o=r===undefined?e.editor.groupIndex:r,u=t.pageIndex,a=u===undefined?e.editor.pageIndex:u,f=e.slide.pages[a];i.a.delete(f.groups,o),n.i(s.isEmpty)(f.groups)&&i.a.delete(f,"groups")}function L(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.group,o=t.groupIndex,u=o===undefined?e.editor.groupIndex:o,a=t.pageIndex,f=a===undefined?e.editor.pageIndex:a;n.i(s.objectDeepAssign)(e.slide.pages[f].groups[u],r,i.a.set)}function A(e,t){var n=t.elementIndex,r=n===undefined?e.editor.elementIndex:n,i=t.groupIndex,s=i===undefined?e.editor.groupIndex:i,o=t.pageIndex,u=o===undefined?e.editor.pageIndex:o,a=e.slide.pages[u].groups[s].elements,f=a.indexOf(r);f>-1?a.splice(f,1):(a.push(r),a.sort(function(e,t){return e-t}))}function O(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=t.pageIndex,r=n===undefined?e.editor.pageIndex:n,s=t.elementIndex,o=s===undefined?e.editor.elementIndex:s,u=t.element,a=u===undefined?{}:u;i.a.set(e.slide.pages[r].elements,o,a)}function M(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.pageIndex,i=r===undefined?e.editor.pageIndex:r,o=t.elementIndex,u=o===undefined?e.editor.elementIndex:o,a=t.level,f=t.delta,l=f===undefined?1:f,c=t.batch,h=c===undefined?[]:c,p=e.slide.pages[i].groups,d=e.slide.pages[i].elements;l=n.i(s.isNumeric)(a)?(~~a+1-a)/(h.length+1):l;var v=d.map(function(e,t){return{index:t,level:e.styles["z-index"]}});n.i(s.isNumeric)(a)&&(n.i(s.isEmpty)(h)&&v[u]?v[u].level=a:h.reduce(function(e,t){return v[t].level=e,e+l},a+l));if(!n.i(s.isEmpty)(p))for(var m in p){var g=p[m],y=g.elements.reduce(function(e,t){return Math.max(e,v[t].level)},0);v.push({index:g.id,level:y?y+l/2:g.styles["z-index"]})}v.sort(function(e,t){return e.level-t.level}),v.forEach(function(e,t){n.i(s.isString)(e.index)?p[e.index].styles["z-index"]=t+11:d[e.index].styles["z-index"]=t+11})}function _(e,t){var n=t.pageIndex,r=n===undefined?e.editor.pageIndex:n,i=t.elements,s=i===undefined?[]:i;e.slide.pages[r].elements=e.slide.pages[r].elements.concat(s)}function D(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.pageIndex,o=r===undefined?e.editor.pageIndex:r,u=t.elementIndex,a=u===undefined?e.editor.elementIndex:u,f=t.data,l=f===undefined?{}:f;n.i(s.objectDeepAssign)(e.slide.pages[o].elements[a],l,function(e,t,n){e[t]===undefined&&i.a.set(e,t,n)})}function P(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=t.pageIndex,r=n===undefined?e.editor.pageIndex:n,i=t.elementIndex,s=i===undefined?e.editor.elementIndex:i;e.slide.pages[r].elements.splice(s,1)}function H(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.pageIndex,o=r===undefined?e.editor.pageIndex:r,u=t.elementIndex,a=u===undefined?e.editor.elementIndex:u,f=t.data;n.i(s.objectDeepAssign)(e.slide.pages[o].elements[a],f,i.a.delete)}function B(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.pageIndex,o=r===undefined?e.editor.pageIndex:r,u=t.elementIndex,a=u===undefined?e.editor.elementIndex:u,f=t.data,l=f===undefined?{}:f,c=t.method,h=c===undefined?i.a.set:c;n.i(s.objectDeepAssign)(e.slide.pages[o].elements[a],l,h)}function j(e,t){var n=t.type;e.type=n}function F(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=t.elementIndex,r=n===undefined?-1:n,s=t.pageIndex,o=s===undefined?e.editor.pageIndex:s,u=t.groupIndex,a=u===undefined?!1:u;o=Math.max(0,Math.min(o,e.slide.pages.length-1));var f=e.slide.pages[o].elements,l=e.slide.pages[o].groups;r=Math.max(-1,Math.min(r,f.length-1)),f[r]&&f[r].group&&(a=f[r].group),a=l&&l[a]?a:!1,i.a.set(e.editor,"elementIndex",r),i.a.set(e.editor,"pageIndex",o),i.a.set(e.editor,"groupIndex",a)}function I(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.pageIndex,o=r===undefined?e.editor.pageIndex:r,u=t.groupIndex,a=u===undefined?e.editor.groupIndex:u,f=t.data;n.i(s.objectDeepAssign)(e.slide.pages[o].groups[a],f,i.a.delete)}function q(e,t){var r=t.data;n.i(s.objectDeepAssign)(e.editor,r,i.a.set)}function R(e,t){var r=e.slide.pages[e.editor.pageIndex],i=r.elements,o=e.editor.chain,u=o.indexOf(t);if(u>-1){o.splice(u,1),o.length===1&&(n.i(s.isNumeric)(o[0])?e.editor.elementIndex=o[0]:e.editor.groupIndex=o[0],o.pop());return}var a=r.groups;if(n.i(s.isNumeric)(t)){if(i[t].group){var f=o.indexOf(i[t].group);f>-1&&o.splice(f,1)}o.push(t)}else{a[t].elements.forEach(function(e){var t=o.indexOf(e);t>-1&&o.splice(t,1)});if(n.i(s.isEmpty)(o)){e.editor.groupIndex=t;return}o.push(t)}o.sort(function(e,t){return(i[e]||a[e]).styles["z-index"]-(i[t]||a[t]).styles["z-index"]})}function U(e){e.editor.operation++}function z(){}function X(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};t.replace||(e.slide._t=Date.now());var n=J(e,t);if(e.shadow.x){var r=e.shadow.x;e.shadow.z.length>32&&e.shadow.z.shift(),t.replace||e.shadow.z.push(r),e.shadow.x=n}else e.shadow.x=n;e.shadow.y.length>0&&(e.shadow.y=[]);var i=e.editor.slideInfo;W&&o["default"].setSlide(Object.assign({},i,{slide_config:n.slide}),i.slide_id||(a.isLogin?"noSave":"noLogin"),i.user_name||!a.isLogin&&"noLogin"),W++}function V(e){if(e.shadow.z.length>0){var t=e.shadow.z.pop(),n=e.shadow.x;e.shadow.y.push(n),K(e,t,n)}}function $(e){if(e.shadow.y.length>0){var t=e.shadow.y.pop(),n=e.shadow.x;e.shadow.z.push(n),K(e,t,n)}}function J(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return Object.assign({slide:n.i(s.deepClone)(e.slide),t:e.slide._t,pageIndex:e.editor.pageIndex},t)}function K(e,t,r){var u=e.editor;u.elementIndex=-1,u.groupIndex=!1,u.chain=[];if(!n.i(s.isEmpty)(e.editor.latestNotes)||!n.i(s.isEmpty)(e.editor.latestAudios)){var f=e.editor.latestNotes,c=e.editor.latestAudios;t.slide.pages=t.slide.pages.map(function(e){return f[e.id]&&(e.notes=f[e.id]),c[e.id]&&(e.audio=c[e.id]),e})}Object.assign(t.slide,{colors:e.slide.colors,font:e.slide.font,config:e.slide.config}),e.slide=n.i(s.deepClone)(t.slide),e.shadow.x=t,t.pageIndex!==e.editor.pageIndex&&i.a.nextTick(function(){l.a.slide(t.pageIndex)}),t.revealSync&&i.a.nextTick(function(){l.a.sync()});if(W){var h=e.editor.slideInfo;o["default"].setSlide(Object.assign({},h,{slide_config:e.slide}),h.slide_id||(a.isLogin?"noSave":"noLogin"),h.user_name||!a.isLogin&&"noLogin")}W++}Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=n.n(r),s=n(14),o=n(349),u=n(535),a=n(140),f=n(347),l=n.n(f);t.SETSLIDE=d,t.EDITCONFIG=v,t.EDITSLIDE=m,t.SETPAGE=g,t.SETPAGESELECTED=y,t.SETPAGENOTES=b,t.EDITPAGE=w,t.CHANGEPAGEORDER=E,t.CHANGEPAGESORDER=S,t.DELPAGE=x,t.SETGROUP=T,t.BUILDGROUPS=N,t.BUILDGROUPSTYLES=C,t.DELGROUP=k,t.EDITGROUP=L,t.MODIFYGROUPELEMENTS=A,t.SETELEMENT=O,t.CHANGEELEMENTZINDEX=M,t.CONCATELEMENTS=_,t.COMPLEMENTELEMENT=D,t.DELELEMENTBYINDEX=P,t.DELELEMENTATTR=H,t.EDITELEMENT=B,t.SETTYPE=j,t.SETELEMENTSELECTED=F,t.DELGROUPATTR=I,t.EDITEDITOR=q,t.MODIFYCHAIN=R,t.MARKOPERATION=U,t.MARKTRANSACTION=z,t.PUSHSHADOW=X,t.POPSHADOW=V,t.REDOSHADOW=$;var c=function(){function e(e,t){var n=[],r=!0,i=!1,s=undefined;try{for(var o=e[Symbol.iterator](),u;!(r=(u=o.next()).done);r=!0){n.push(u.value);if(t&&n.length===t)break}}catch(a){i=!0,s=a}finally{try{!r&&o["return"]&&o["return"]()}finally{if(i)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),W=0},534:function(e,t,n){"use strict";function l(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!0;t&&e.dispatch("MARKOPERATION"),s&&clearTimeout(s),s=setTimeout(function(){r["default"].$emit("auto-save")},2e3)}function c(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},r=n.force,s=r===undefined?!1:r,u=n.replace,a=u===undefined?!1:u;o++;if(i||s)i=!1,setTimeout(function(){i=!0},1e3),t.dispatch("PUSHSHADOW",Object.assign(f,{replace:a})),a||l(t),f={};!t.state.editor.pageIndex&&!t.state.editor.coverEdited&&t.dispatch("EDITEDITOR",{data:{coverEdited:!0}})}var r=n(29),i=!0,s=null,o=0,u=0,a=0,f={},h=function(t){t.subscribe(function(e,n){switch(e.type){case"SETPAGE":case"EDITPAGE":f.revealSync=!0,c(e,t);break;case"CHANGEPAGEORDER":case"DELPAGE":case"MARKTRANSACTION":case"SETELEMENT":c(e,t);break;case"SETPAGENOTES":e.payload[0].init||l(t);break;case"EDITSLIDE":case"EDITCONFIG":case"CHECKFRAGMENT":l(t);break;case"MARKOPERATION":l(t,!1);break;case"SETPAGESELECTED":n.editor.pageIndex!==a&&(a=n.editor.pageIndex,c(e,t,{force:!0,replace:u===o}),u=o)}})};t.a=[h]},535:function(e,t,n){"use strict";function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(485),i=n.n(r),s=n(354),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){u(this,e),this.converters={2:function(t){return t.pages.forEach(function(e){e.numbers=e.numbers||{};var n=e.color||t.colors.color;e.elements=e.elements.map(function(t){var r=t.type;e.numbers[r]=e.numbers[r]||0;var o=++e.numbers[r];return t.name=t.name||(r!=="plugin-text"?s.pluginName[r]+o:undefined),r==="plugin-line"&&i.a.equals(t.stroke,n)&&delete t.stroke,t})}),t}},this.currentVersion=parseInt(Object.keys(this.converters).sort(function(e,t){return t-e})[0],10)}return o(e,[{key:"check",value:function(t){var n=this;t.version=t.version||0;if(t.version<this.currentVersion){var r=Object.keys(this.converters).filter(function(e){return e>t.version}).sort(function(e,t){return e-t}).map(function(e){return n.converters[e]});t=r.reduce(function(e,t){return t(e)},t),t.version=this.currentVersion}return t}}]),e}();t.a=new a},97:function(e,t,n){"use strict";var r=n(344)}});